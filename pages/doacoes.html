<!DOCTYPE html>

<html lang="pt-br">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Controle de Doações - ONG Novo Amanhã</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
<link href="../css/config-styles.css" rel="stylesheet"/>
<link href="../css/doacoes.css" rel="stylesheet"/>
<link href="../css/global.css" rel="stylesheet"/>
<link href="../css/navbar.css" rel="stylesheet"/>
<link href="../css/cards.css" rel="stylesheet"/>
<link href="../css/background-pattern.css" rel="stylesheet"/>
<link href="../css/themes.css" rel="stylesheet"/>

</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top shadow" style="background-color: var(--primary-color);">
    <div class="container-fluid">
        <a class="navbar-brand" href="#" style="display: flex; align-items: center; gap: 10px;">
            <i class="bi bi-box-seam"></i>
            <span class="h5 mb-0" data-i18n="platform_name">Beta - Plataforma de Gestão</span>
        </a>
        <div class="d-flex align-items-center">
            <a href="menu.html" class="btn btn-outline-light me-3">
                <i class="bi bi-house-door"></i>
                Início
            </a>
            <div class="dropdown">
                <div class="user-profile" id="userProfileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <div class="avatar" id="userAvatar">UT</div>
                    <div class="user-info">
                        <span class="user-name" id="userName" data-i18n="user_name">Usuário</span>
                        <i class="bi bi-chevron-down dropdown-arrow"></i>
                    </div>
                </div>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userProfileDropdown">
                    <li>
                        <div class="dropdown-header">
                            <div class="avatar-small" id="userAvatarSmall">UT</div>
                            <div class="header-info">
                                <span class="header-name" id="userNameFull" data-i18n="user_full_name">Usuário</span>
                                <span class="header-email" id="userEmail" data-i18n="user_email">usuario@email.com</span>
                            </div>
                        </div>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    <li>
                        <a class="dropdown-item" href="perfil.html" title="Visualizar e editar seu perfil">
                            <i class="bi bi-person-circle"></i>
                            <div class="item-content">
                                <span class="item-title" data-i18n="profile">Perfil</span>
                                <span class="item-description" data-i18n="view_edit_profile">Visualizar e editar suas informações</span>
                            </div>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="configuracoes.html" title="Ajustar configurações do sistema">
                            <i class="bi bi-gear"></i>
                            <div class="item-content">
                                <span class="item-title" data-i18n="settings">Configurações</span>
                                <span class="item-description" data-i18n="customize_experience">Personalizar sua experiência</span>
                            </div>
                        </a>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    <li>
                        <a class="dropdown-item logout-item" href="javascript:void(0)" id="btnLogout" title="Sair do sistema">
                            <i class="bi bi-box-arrow-right"></i>
                            <div class="item-content">
                                <span class="item-title" data-i18n="logout">Sair</span>
                                <span class="item-description" data-i18n="end_session">Encerrar sessão</span>
                            </div>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<div class="container py-5 mt-5">
<div class="row mb-4">
<div class="col">
<h2 class="mb-4">
<i class="bi bi-gift"></i> Controle de Doações
                </h2>
</div>
<div class="col-auto">
<button class="btn btn-purple" data-bs-target="#novaDoacaoModal" data-bs-toggle="modal">
<i class="bi bi-plus-lg"></i> Nova Doação
                </button>
</div>
</div>

<div class="donation-stats">
<div class="row g-4">
<div class="col-md-3">
<div class="stat-card">
<div class="stat-icon">
<i class="bi bi-currency-dollar"></i>
</div>
<div class="stat-value" id="totalMonetario">R$ 0,00</div>
<div class="stat-label">Total Monetário</div>
</div>
</div>
<div class="col-md-3">
<div class="stat-card">
<div class="stat-icon">
<i class="bi bi-box-seam"></i>
</div>
<div class="stat-value" id="totalMateriais">0</div>
<div class="stat-label">Doações Materiais</div>
</div>
</div>
<div class="col-md-3">
<div class="stat-card">
<div class="stat-icon">
<i class="bi bi-basket"></i>
</div>
<div class="stat-value" id="totalAlimentos">0</div>
<div class="stat-label">Doações Alimentos</div>
</div>
</div>
<div class="col-md-3">
<div class="stat-card">
<div class="stat-icon">
<i class="bi bi-people"></i>
</div>
<div class="stat-value" id="totalDoadores">0</div>
<div class="stat-label">Doadores Únicos</div>
</div>
</div>
</div>
</div>

<div class="donation-filters">
<div class="filter-group">
<div class="input-group" style="max-width: 250px;">
<span class="input-group-text">
<i class="bi bi-search"></i>
</span>
<input class="form-control" id="searchInput" placeholder="Buscar doação..." type="text"/>
</div>
<select class="form-select" id="tipoFilter" style="max-width: 200px;">
<option value="">Todos os tipos</option>
<option value="monetaria">Monetária</option>
<option value="material">Material</option>
<option value="alimentos">Alimentos</option>
</select>
<select class="form-select" id="statusFilter" style="max-width: 200px;">
<option value="">Todos os status</option>
<option value="pendente">Pendente</option>
<option value="recebida">Recebida</option>
<option value="cancelada">Cancelada</option>
</select>
<input class="form-control" id="dataFilter" style="max-width: 200px;" type="date"/>
<button class="btn btn-outline-secondary" id="limparFiltros">
<i class="bi bi-x-lg"></i> Limpar Filtros
                </button>
</div>
</div>

<div class="donation-table">
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Data</th>
<th>Doador</th>
<th>Tipo</th>
<th>Descrição</th>
<th>Valor/Quantidade</th>
<th>Status</th>
<th>Ações</th>
</tr>
</thead>
<tbody id="doacoesTableBody">

</tbody>
</table>
</div>
<div class="text-center py-5" id="emptyState" style="display: none;">
<i class="bi bi-inbox text-muted" style="font-size: 3rem;"></i>
<p class="text-muted mt-3">Nenhuma doação encontrada</p>
</div>
</div>
</div>

<div class="modal fade" id="novaDoacaoModal" tabindex="-1">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title">
<i class="bi bi-gift"></i> Nova Doação
                    </h5>
<button class="btn-close" data-bs-dismiss="modal" type="button"></button>
</div>
<div class="modal-body">
<form class="donation-form" id="doacaoForm">

<h6 class="mb-3">Informações do Doador</h6>
<div class="row g-3">
<div class="col-md-6">
<label class="form-label">Nome do Doador</label>
<input class="form-control" id="doadorNome" required="" type="text"/>
</div>
<div class="col-md-6">
<label class="form-label">Email</label>
<input class="form-control" id="doadorEmail" type="email"/>
</div>
<div class="col-md-6">
<label class="form-label">Telefone</label>
<input class="form-control" id="doadorTelefone" type="tel"/>
</div>
<div class="col-md-6">
<label class="form-label">CPF/CNPJ</label>
<input class="form-control" id="doadorDocumento" type="text"/>
</div>
</div>
<hr class="my-4"/>

<h6 class="mb-3">Informações da Doação</h6>
<div class="row g-3">
<div class="col-md-6">
<label class="form-label">Tipo de Doação</label>
<select class="form-select" id="doacaoTipo" required="">
<option value="">Selecione...</option>
<option value="monetaria">Monetária</option>
<option value="material">Material</option>
<option value="alimentos">Alimentos</option>
</select>
</div>
<div class="col-md-6" id="valorField">
<label class="form-label">Valor</label>
<div class="input-group">
<span class="input-group-text">R$</span>
<input class="form-control" id="doacaoValor" step="0.01" type="number"/>
</div>
</div>
</div>

<div id="itensContainer" style="display: none;">
<div class="donation-items">
<div id="itensList">

<div class="item-row">
<div class="flex-grow-1">
<label class="form-label">Item</label>
<input class="form-control item-nome" required="" type="text"/>
</div>
<div style="width: 150px;">
<label class="form-label">Quantidade</label>
<input class="form-control item-quantidade" min="1" required="" type="number"/>
</div>
<div class="d-flex align-items-end" style="width: 40px;">
<i class="bi bi-trash remove-item"></i>
</div>
</div>
</div>
<button class="btn btn-outline-secondary mt-3" id="addItem" type="button">
<i class="bi bi-plus-lg"></i> Adicionar Item
                                </button>
</div>
</div>
<div class="row g-3 mt-3">
<div class="col-12">
<label class="form-label">Observações</label>
<textarea class="form-control" id="doacaoObs" rows="3"></textarea>
</div>
</div>
</form>
</div>
<div class="modal-footer">
<button class="btn btn-outline-secondary" data-bs-dismiss="modal" type="button">Cancelar</button>
<button class="btn btn-purple" id="salvarDoacao" type="button">
<i class="bi bi-check-lg"></i> Salvar Doação
                    </button>
</div>
</div>
</div>
</div>

<div style="margin-top: 1rem;">
<a href="menu.html"><button>Voltar ao Início</button></a>
</div>
<script src="../utils/default.js"></script><script src="../data/simulacoes.js"></script><script src="../js/doacoes.js"></script><script>
document.addEventListener("DOMContentLoaded", () => {
  const tbody = document.getElementById("doacoesTableBody");
  const dados = carregarLocal("simulacaoDoacoes") || [];

  if (tbody && dados.length > 0) {
    tbody.innerHTML = "";
    dados.forEach((doacao) => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${doacao.tipo}</td>
        <td>${doacao.descricao}</td>
        <td>${doacao.data}</td>
        <td>${doacao.valor.toFixed(2)}</td>
        <td>${doacao.status}</td>
      `;
      tbody.appendChild(row);
    });
  }
});
</script></body>
</html>